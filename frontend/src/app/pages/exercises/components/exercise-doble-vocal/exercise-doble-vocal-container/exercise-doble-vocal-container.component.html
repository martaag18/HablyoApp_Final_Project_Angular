<div class="w-full p-4 mx-auto mt-6">
  
  <!-- Header -->
  <app-exercise-header></app-exercise-header>

  <!-- Sección de introducción / explicación -->
  @if (explanation) {
    <section class="mb-6">
      <div class="bg-gray-100 p-4 rounded shadow" [innerHTML]="explanation"></div>
    </section>
  }

  <!-- Título e instrucciones del ejercicio -->
  <section class="mb-4">
    <h2 class="text-xl font-bold mb-2">
      Ejercicio número: {{ currentExercise().id }}
    </h2>
    <p class="text-sm text-gray-600">
      {{ currentExercise().instructions }}
    </p>
  </section>

  <!-- Componente de presentación -->
  <section class="mb-6" aria-label="Presentación del ejercicio">
    <app-exercise-doble-vocal-presentation
      [wordList]="stateService.wordList()"
      [tildeMark]="stateService.tildeMark()"
      [arcMark]="stateService.arcMark()"
      [pMark]="stateService.pMark()"
      [underlineMark]="stateService.underlineMark()"
      [resultTilde]="stateService.resultTilde()"
      [resultArc]="stateService.resultArc()"
      [resultP]="stateService.resultP()"
      [resultUnderline]="stateService.resultUnderline()"
      [vdobleIndices]="vdobleIndices"
      (tildeDropped)="onTildeDropped($event)"
      (arcDropped)="onArcDropped($event)"
      (pDropped)="onPDropped($event)"
      (underlineDropped)="onUnderlineDropped($event)"
    ></app-exercise-doble-vocal-presentation>
  </section>

  <!-- Contenedor de acciones y navegación -->
  <section aria-label="Acciones y navegación del ejercicio">
    <div class="flex flex-wrap gap-4 items-start">
      <!-- Bloque de acciones -->
      <div class="flex flex-wrap gap-2 sm:flex-col sm:items-stretch" aria-label="Acciones del ejercicio">
        <app-exercise-actions
          (complete)="onComplete()"
          (solve)="onSolve()"
          (restart)="onRestart()"
        ></app-exercise-actions>
      </div>

      <!-- Bloque de navegación -->
      <div class="flex flex-wrap gap-2 sm:flex-col sm:items-stretch" aria-label="Navegación del ejercicio">
        <app-exercise-navigation
          [showPrevious]="navigatorService.currentIndex() > 0"
          (next)="onNextExercise()"
          (previous)="onPreviousExercise()"
        ></app-exercise-navigation>
      </div>
    </div>
  </section>
</div>
